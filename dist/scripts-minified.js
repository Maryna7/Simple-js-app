const pokemonRepository=function(){let e=[];function t(t){"object"==typeof t&&"name"in t&&"detailsUrl"in t?e.push(t):console.warn("wrong object type")}function n(){return e}function i(e){if(!1===e.isVisible)return;let t=document.querySelector(".row"),n=document.createElement("div"),i=document.createElement("button");n.classList.add("col-12","col-sm-6","col-md-4","col-xl-2"),i.innerText=e.name,i.classList.add("pokemon-button","btn","btn-info","btn-lg","btn-block","text-capitalize"),i.setAttribute("data-toggle","modal"),i.setAttribute("data-target","#modal"),n.appendChild(i),t.appendChild(n),function e(t,n){t.addEventListener("click",function(){(function e({name:t,frontImageUrl:n,backImageUrl:i,height:o,weight:a,types:l,abilities:r}){let s=document.querySelector(".modal-title"),c=document.querySelector(".modal-body");s.innerHTML="",c.innerHTML="",s.innerText=t;let d=document.createElement("img");d.classList.add("madal-img"),d.setAttribute("src",n),d.setAttribute("width","50%"),d.setAttribute("alt","Front image of a pokemon");let p=document.createElement("img");p.classList.add("madal-img"),p.setAttribute("src",i),p.setAttribute("width","50%"),p.setAttribute("alt","Back image of a pokemon");let u=document.createElement("p");u.innerText=`Height: ${o}`;let m=document.createElement("p");m.innerText=`Weight: ${a}`;let f=document.createElement("p");f.innerText=`Types: ${l}`;let h=document.createElement("p");h.innerText=`Abilities: ${r}`,c.appendChild(d),c.appendChild(p),c.appendChild(u),c.appendChild(m),c.appendChild(f),c.appendChild(h)})(n)})}(i,e)}let o=document.getElementById("searchbar");return o.addEventListener("input",function t(n){var o;let a=document.querySelector(".row");a.innerHTML="",o=n.target.value.toLowerCase(),e.forEach(function(e){e.name.includes(o)?e.isVisible=!0:e.isVisible=!1}),e.forEach(function(e){i(e)})}),{add:t,getAll:n,addListItem:i,loadList:function e(){return fetch("https://pokeapi.co/api/v2/pokemon/?offset=200&limit=200").then(function(e){return e.json()}).then(function(e){e.results.forEach(function(e){let n={name:e.name,detailsUrl:e.url};t(n)})}).catch(function(e){console.error(e)})},loadDetails:function e(t){let n=t.detailsUrl;return fetch(n).then(function(e){return e.json()}).then(function(e){t.frontImageUrl=e.sprites.front_default,t.backImageUrl=e.sprites.back_default,t.height=e.height,t.weight=e.weight,t.types=e.types.map(e=>e.type.name),t.abilities=e.abilities.map(e=>e.ability.name),t.isVisible=!0}).catch(function(e){console.error(e)})}}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(e){pokemonRepository.loadDetails(e).then(()=>{pokemonRepository.addListItem(e)})})});